(function(t){function e(e){for(var n,s,r=e[0],c=e[1],u=e[2],l=0,h=[];l<r.length;l++)s=r[l],i[s]&&h.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={puser:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var p=c;o.push([19,"chunk-vendors","chunk-common"]),a()})({19:function(t,e,a){t.exports=a("500f")},"500f":function(t,e,a){"use strict";a.r(e);a("8a58");var n=a("e41f"),i=(a("e7e5"),a("d399")),o=(a("4b0a"),a("2bb1")),s=(a("7844"),a("5596")),r=(a("cadf"),a("551c"),a("097d"),a("9ab4")),c=(a("3a37"),a("499a"),a("60a3")),u=a("1831"),p=a("65d9"),l=a.n(p),h=a("90ae"),f=a("dfdf"),d=a("a306"),g=a("9347"),_=a("3c6c"),m=a("7d83"),b=a("d939"),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userInfo=new _["j"],e.isLoading=!1,e.payObj=new _["e"],e.payType=0,e.payStatuas=0,e.payDialogVisible=!1,e.pageIndex=0,e.getOrderListCount=0,e.nicknameDialogVisible=!1,e.loginOutDialogVisible=!1,e.newNickname="",e.editAvatarVisible=!1,e.imageHeadUrl="",e.webUrl="",e.region_code=g["a"].getRegionCodes(),e.isGuest=!1,e.http=new u["a"],e}return r["c"](e,t),e.prototype.init=function(){this.getUserInfo()},e.prototype.execute=function(){},e.prototype.setBaseUrl=function(t){this.http.setBaseUrl(t)},e.prototype.getUserInfo=function(){return r["a"](this,void 0,void 0,function(){var t,e,a,n;return r["d"](this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=g["a"].getUrlParam("account_token"),""==t&&(t=m["a"].getUserToken().account_token),e=u["a"].URL_USER_INFO,a={account_token:t},n=this,[4,this.http.post(e,a)];case 1:return n.backData=i.sent(),this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?(this.userInfo=this.backData.data,_["j"].getUserName(this.userInfo),_["j"].updateUserInfo(this.userInfo),this.isGuest=g["a"].isGuest(this.userInfo.nickname),this.getUserinfoSuccess()):this.backData.code==u["a"].HTTP_TOKEN_EXPIRE&&this.LoginExpired(),[3,3];case 2:return i.sent(),m["a"].loginOut(),b["a"].backHome(),[3,3];case 3:return[2]}})})},e.prototype.getUserinfoSuccess=function(){},e.prototype.LoginExpired=function(){m["a"].loginOut(),b["a"].backLogin()},e.prototype.onResetPassword=function(t){return r["a"](this,void 0,void 0,function(){var e,a;return r["d"](this,function(n){switch(n.label){case 0:return this.isLoading=!0,e=u["a"].URL_USER_PASSWORD,a=this,[4,this.http.post(e,t)];case 1:return a.backData=n.sent(),this.isLoading=!1,this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?this.onResetPasswordSuccess(this.backData):this.backData.code==u["a"].HTTP_TOKEN_EXPIRE?(m["a"].loginOut(),b["a"].backHome()):this.onResetPasswordFaild(this.backData),[2]}})})},e.prototype.onResetPasswordSuccess=function(t){},e.prototype.onResetPasswordFaild=function(t){},e.prototype.onSendVerification=function(t){return r["a"](this,void 0,void 0,function(){var e,a;return r["d"](this,function(n){switch(n.label){case 0:return this.isLoading=!0,e=u["a"].URL_USER_VERIFY_CODE,a=this,[4,this.http.post(e,t)];case 1:return a.backData=n.sent(),this.isLoading=!1,this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?this.onSendVerificationSuccess(this.backData):this.backData.code==u["a"].HTTP_TOKEN_EXPIRE?(m["a"].loginOut(),b["a"].backHome()):this.onSendVerificationFaild(this.backData),[2]}})})},e.prototype.onSendVerificationSuccess=function(t){},e.prototype.onSendVerificationFaild=function(t){},e.prototype.onSetSecondPassword=function(t){return r["a"](this,void 0,void 0,function(){var e,a;return r["d"](this,function(n){switch(n.label){case 0:return this.isLoading=!0,e=u["a"].URL_USER_MANAGE,a=this,[4,this.http.post(e,t)];case 1:return a.backData=n.sent(),this.isLoading=!1,this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?this.onSetSecondPasswordSuccess(this.backData):this.backData.code==u["a"].HTTP_TOKEN_EXPIRE?(m["a"].loginOut(),b["a"].backHome()):this.onSetSecondPasswordFaild(this.backData),[2]}})})},e.prototype.onSetSecondPasswordSuccess=function(t){},e.prototype.onSetSecondPasswordFaild=function(t){},e.prototype.onSaveUserInfo=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=""),r["a"](this,void 0,void 0,function(){var a,n,i,o;return r["d"](this,function(s){switch(s.label){case 0:return a=m["a"].getUserToken().account_token,n=u["a"].URL_USER_EDIT,i={account_token:a},""!=t&&null!=t&&(i["nickname"]=t),""!=e&&null!=e&&(i["user_url"]=e),o=this,[4,this.http.post(n,i)];case 1:return o.backData=s.sent(),this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?(""!=t&&(this.userInfo.nickname=t),""!=e&&(this.userInfo.avatar=this.imageHeadUrl+e),_["j"].updateUserInfo(this.userInfo),this.onSaveUserInfoSuccess()):this.backData.code==u["a"].HTTP_TOKEN_EXPIRE?(m["a"].loginOut(),b["a"].backHome()):this.onSaveUserInfoError(this.backData),[2]}})})},e.prototype.onSaveUserInfoSuccess=function(){},e.prototype.onSaveUserInfoError=function(t){},e.prototype.saveUserInfo=function(t){return r["a"](this,void 0,void 0,function(){var e,a,n,i;return r["d"](this,function(o){switch(o.label){case 0:return e=m["a"].getUserToken().account_token,a=u["a"].URL_USER_EDIT,n={account_token:e},""!=t.nickname&&null!=t.nickname&&(n["nickname"]=t.nickname),""!=t.user_url&&null!=t.user_url&&(n["user_url"]=t.user_url),""!=t.address&&null!=t.address&&(n["address"]=t.address),""!=t.email&&null!=t.email&&(n["email"]=t.email),""!=t.mobile_contact_number&&null!=t.mobile_contact_number&&(n["mobile_contact_number"]=t.mobile_contact_number,n["mobile_contact_type"]=0),i=this,[4,this.http.post(a,n)];case 1:return i.backData=o.sent(),this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?(""!=t.nickname&&(this.userInfo.nickname=t.nickname),""!=t.user_url&&(this.userInfo.avatar=this.imageHeadUrl+t.user_url),""!=t.address&&(this.userInfo.address=t.address),""!=t.mobile_contact_number&&(this.userInfo.mobile_contact_number=t.mobile_contact_number),""!=t.email&&(this.userInfo.email=t.email),_["j"].updateUserInfo(this.userInfo),this.onSaveUserInfosSuccess()):this.backData.code==u["a"].HTTP_TOKEN_EXPIRE?(m["a"].loginOut(),b["a"].backHome()):this.onSaveUserInfosError(this.backData),[2]}})})},e.prototype.onSaveUserInfosSuccess=function(){},e.prototype.onSaveUserInfosError=function(t){},e.prototype.uploadAvatar=function(t){return r["a"](this,void 0,void 0,function(){var e,a,n,i,o,s;return r["d"](this,function(r){switch(r.label){case 0:return e=m["a"].getUserToken().account_token,a=u["a"].URL_USER_UPLOAD,n=new _["i"],n.account_token=e,n.filename=t,i=this,[4,this.http.post(a,n)];case 1:return i.backData=r.sent(),this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?(o=this.backData.data.file_path,this.editAvatarVisible=!1,this.userInfo.avatar=this.imageHeadUrl+o,m["a"].addUserInfo(this.userInfo),s=new _["h"],s.user_url=o,this.saveUserInfo(s),this.uploadAvatarSuccess(),console.log("上传图片成功!"+o)):console.log("上传图像失败!"),[2]}})})},e.prototype.onLoginOut=function(){return r["a"](this,void 0,void 0,function(){var t,e,a,n;return r["d"](this,function(i){switch(i.label){case 0:return t=m["a"].getUserToken(),e=u["a"].URL_AUTH_LOGOUT,a={account_token:t.account_token},n=this,[4,this.http.post(e,a)];case 1:return n.backData=i.sent(),this.backData.code!=u["a"].HTTP_SUCCESS_NET_CODE&&this.backData.code!=u["a"].HTTP_TOKEN_EXPIRE||(m["a"].loginOut(),b["a"].backHome()),[2]}})})},e.prototype.uploadAvatarSuccess=function(){},e.prototype.onCardFee=function(t){return r["a"](this,void 0,void 0,function(){var e,a;return r["d"](this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=u["a"].URL_USER_CARDFEE,a=this,[4,this.http.post(e,t)];case 1:return a.backData=n.sent(),this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE?this.onCardFeeSuccess():this.backData.code==u["a"].HTTP_TOKEN_EXPIRE||this.onCardFeeError(this.backData),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}})})},e.prototype.onCardFeeSuccess=function(){},e.prototype.onCardFeeError=function(t){},e=r["b"]([c["a"]],e),e}(c["c"]),y=v,S=a("b890"),k=a("42d1"),E=a("9d9a"),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex_center"},[n("div",{staticClass:"top_s1"},[n("p",{staticClass:"nickname_title",staticStyle:{"margin-top":"5px"}},[t._v(t._s(t.$t("puser.r12")))]),n("a",{staticClass:"cancel_s1"},[n("img",{staticClass:"img_filter",staticStyle:{width:"10px"},attrs:{src:a("93a4"),alt:""},on:{click:t.onClose}})])]),n("div",{staticClass:"flex_center",staticStyle:{width:"260px",height:"260px",display:"inline-block"}},[null!=t.option.img?n("vue-cropper",{ref:"cropper",staticStyle:{width:"260px",height:"260px"},attrs:{img:t.option.img,info:!0,fixedBox:!1,high:!0,original:!0,autoCrop:!0,full:!0,fixed:!0}}):t._e(),null==t.option.img?n("img",{staticStyle:{"margin-top":"60px"},attrs:{src:a("ff39")}}):t._e()],1),n("div",{staticStyle:{"margin-bottom":"10px",position:"relative"}},[n("button",{staticClass:"normal_btn"},[t._v(t._s(t.$t("puser.r11")))]),n("input",{ref:"imageUpInput",staticClass:"update_input",attrs:{id:"imageUpBtn",type:"file",accept:"image/*"},on:{change:t.onChooseImage}}),n("button",{staticClass:"normal_btn",staticStyle:{"margin-left":"20px"},on:{click:t.saveImage}},[t._v(t._s(t.$t("puser.r3")))])])])},T=[],I=a("7e79"),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.option={img:null,outputType:"png"},e}return r["c"](e,t),e.prototype.onChooseImage=function(t){var e=this,a=t.target.files||t.dataTransfer.files;if(a.length){var n=a[0];if(n.size>512e3)Object(i["a"])("图片大小限制500k(Image size limit 500k)!");else if(0==n.type.indexOf("image")){var o=new FileReader;o.readAsDataURL(n),o.onload=function(t){var a=this.result;e.option.img=a}}}},e.prototype.saveImage=function(){if(null!=this.option.img){var t=this;this.$refs.cropper.getCropData(function(e){t.$emit("on-upload-avatar",e)})}},e.prototype.onClose=function(){this.$emit("on-close")},e=r["b"]([Object(c["a"])({components:{"vue-cropper":I["VueCropper"]}})],e),e}(c["c"]),C=D,P=C,O=a("2877"),w=Object(O["a"])(P,U,T,!1,null,null,null);w.options.__file="UserAvatarEidt.vue";var L=w.exports,N=(a("db4d"),a("a925"));c["c"].config.productionTip=!1,c["c"].use(s["a"]),c["c"].use(o["a"]),c["c"].use(i["a"]),c["c"].use(n["a"]),c["c"].use(N["a"]);f["a"].getInstace();var R=h["a"].getInstance();R.initNoRefresh();var H=new N["a"](R),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.appParam=f["a"].getInstace(),e.bgImg="images/bg_img.jpg",e.notifyList=[],e.bannerList=[],e.user_url="",e.http=new u["a"],e}return r["c"](e,t),e.prototype.created=function(){this.imageHeadUrl=S["a"].getImgBaseUrl(),this.webUrl=S["a"].getWebBaseUrl(),this.setBaseUrl(S["a"].getBaseUrl()),this.init(),this.getNotifyList(),this.getAcitivityLsit()},e.prototype.mounted=function(){this.changeBg()},e.prototype.changeBg=function(){var t=k["a"].getInstance().getFactory(this.appParam.platform),e=t.getbackground(1);""!=e&&(this.bgImg=e)},e.prototype.goRecharge=function(){var t=k["a"].getInstance().getFactory(this.appParam.platform);t.gotoRecharge()},e.prototype.goNotice=function(){var t=k["a"].getInstance().getFactory(this.appParam.platform),e=b["a"].getWebHeadUrl(this.webUrl,this.appParam);e+=b["a"].HTML_NAME_NOTIFY,t.jumpUrl(e)},e.prototype.goNoticeDetail=function(t){var e=k["a"].getInstance().getFactory(this.appParam.platform),a=b["a"].getWebHeadUrl(this.webUrl,this.appParam);a=a+b["a"].HTML_NAME_DETAILS_NOTICE+t+".html",e.jumpUrl(a)},e.prototype.goActivity=function(){k["a"].getInstance().getFactory(this.appParam.platform)},e.prototype.goActivityDetail=function(t){k["a"].getInstance().getFactory(this.appParam.platform)},e.prototype.setBaseUrl=function(t){this.http.setBaseUrl(t)},e.prototype.execute=function(){},e.prototype.getNotifyList=function(){return r["a"](this,void 0,void 0,function(){var t,e,a,n;return r["d"](this,function(i){switch(i.label){case 0:return t=u["a"].URL_NEWS,e=new d["b"],e.page=0,e.size=5,e.support_type=1,e.class_type=0,e.region_code=this.appParam.region_code,a=this,[4,this.http.get(t,e)];case 1:if(a.backData=i.sent(),this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE)for(n in this.notifyList=this.backData.data.list.slice(0,4),this.notifyList)this.notifyList[n].date_time=g["a"].formatDataTime2(this.notifyList[n].publish_time_year,this.notifyList[n].publish_time_month,this.notifyList[n].publish_time_day);return[2]}})})},e.prototype.getAcitivityLsit=function(){return r["a"](this,void 0,void 0,function(){var t,e,a;return r["d"](this,function(n){switch(n.label){case 0:return t=u["a"].URL_ACTIVITY_LIST,e=new d["a"],e.page=0,e.size=3,e.type=1,e.plat_type=3,e.region_code=this.appParam.region_code,a=this,[4,this.http.get(t,e)];case 1:return a.backData=n.sent(),this.backData.code==u["a"].HTTP_SUCCESS_NET_CODE&&(this.bannerList=this.backData.data.list,this.bannerList.length>=5&&(this.bannerList=this.bannerList.slice(0,5))),[2]}})})},e.prototype.clickChangeNickname=function(){this.nicknameDialogVisible=!0},e.prototype.onCloseChangeNickname=function(){this.nicknameDialogVisible=!1,this.newNickname=""},e.prototype.enterToEdit=function(){""!=this.newNickname&&(this.onSaveUserInfo(this.newNickname),this.nicknameDialogVisible=!1)},e.prototype.onSaveUserInfoSuccess=function(){i["a"].success(E["a"].getTipsMsg(E["a"].KEY_NOTIF_RESETNICKNAME_SUCCESS));var t=k["a"].getInstance().getFactory(this.appParam.platform);t.editNicknameSuccess(this.userInfo.nickname)},e.prototype.onEditAvatar=function(){if(null!=this.appParam&&1==this.appParam.platform){if(0==this.appParam.vType)return;var t=b["a"].getWebHeadUrl(this.webUrl,this.appParam);this.user_url=t+b["a"].HTML_NAME_USER+"?account_token="+this.appParam.account_token;var e=k["a"].getInstance().getFactory(this.appParam.platform);e.jumpUrl(this.user_url)}else this.editAvatarVisible=!0},e.prototype.onCloseEditAvatar=function(){this.editAvatarVisible=!1},e.prototype.onUploadAvatar=function(t){this.uploadAvatar(t)},e.prototype.uploadAvatarSuccess=function(){i["a"].success(E["a"].getTipsMsg(E["a"].KEY_NOTIF_RESETNICKNAME_SUCCESS))},e.prototype.onChangeLanguage=function(t){R.changeLanguage(t,!1),H.locale=R.locale,S["a"].log("切换语言:"+R.locale)},e=r["b"]([l()({components:{"user-edit-avatar":L}})],e),e}(y);new A({i18n:H}).$mount("#app")},ff39:function(t,e,a){t.exports=a.p+"img/head_edit.png"}});