(function(e){function t(t){for(var i,n,a=t[0],c=t[1],h=t[2],u=0,g=[];u<a.length;u++)n=a[u],o[n]&&g.push(o[n][0]),o[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);p&&p(t);while(g.length)g.shift()();return r.push.apply(r,h||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,a=1;a<s.length;a++){var c=s[a];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var i={},o={reg:0},r=[];function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=i,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var h=0;h<a.length;h++)t(a[h]);var p=c;r.push([4,"chunk-vendors","chunk-common"]),s()})({"0e92":function(e,t,s){"use strict";s.r(t);s("28a5"),s("a481");var i=s("e814"),o=s.n(i),r=(s("0fb7"),s("450d"),s("f529")),n=s.n(r),a=(s("6611"),s("e772")),c=s.n(a),h=(s("1f1a"),s("4e4b")),p=s.n(h),u=(s("be4f"),s("896a")),g=s.n(u),f=(s("28b2"),s("c7ad")),m=s.n(f),d=(s("f225"),s("89a9")),l=s.n(d),_=(s("f4f9"),s("c2cc")),v=s.n(_),b=(s("7a0f"),s("0f6c")),E=s.n(b),T=(s("560b"),s("dcdc")),M=s.n(T),k=(s("10cb"),s("f3ad")),C=s.n(k),O=(s("cadf"),s("551c"),s("f751"),s("097d"),s("9ab4")),P=s("60a3"),I=(s("db4d"),s("8487")),S=s("f164"),y=s("a888"),D=(s("78fc"),s("2c64")),w=s("eeda"),R=s("dd13"),N=s("b971"),U=s("e1dd"),$=s("9d9a"),H=s("90ae"),A=s("9b4d"),G=s("9347"),x=s("255e"),K=s("fa92"),L=s("649b");P["b"].use(C.a),P["b"].use(M.a),P["b"].use(E.a),P["b"].use(v.a),P["b"].use(l.a),P["b"].use(m.a),P["b"].use(g.a),P["b"].use(p.a),P["b"].use(c.a),P["b"].prototype.$message=n.a,A["a"].addLanguage(G["a"].ZH_CN);var Y=H["a"].getInstance();Y.initNoRefresh();var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.username="",t.password="",t.imgCaptchaM=new w["a"],t.imgCaptchaKey="",t.smscode="",t.groupid="61714",t.checkcode="",t.isAgree=!1,t.reg_step=o()(G["a"].getUrlParam("regstep"))||1,t.options=[],t.improveInfo=new D["a"],t.imageUrl="",t.improveAddress=[],t.improveDetailAddress="",t.improveLicensePic="",t.logoImgurl="",t.licenseImgurl="",t.usertoken={token:""},t.netbar=100,t.xmlHttp=new y["a"],t.xmlParse=new L["a"],t.smsCountDownNum=0,t.isLoading=!1,t}return O["c"](t,e),t.prototype.setBaseUrl=function(e){this.xmlHttp.setBaseUrl(e)},t.prototype.mounted=function(){this.setBaseUrl(R["a"].getBaseUrl()),this.onGetCaptcha(),this.changeUploadUrl(),this.onGetProvince(),this.isFromUser()},t.prototype.isFromUser=function(){if(G["a"].getUrlParam("regToken")){var e=JSON.parse(localStorage.getItem(A["a"].STORAGES_USER_INFO));this.improveInfo.title=e.title,this.netbar=e.number,this.improveInfo.locked_ip=e.locked_ip,this.improveDetailAddress=e.address,this.improveInfo.tel=e.tel,this.improveInfo.qq=e.qq,this.improveInfo.business_manager=e.business_manager,this.improveInfo.business_weixin=e.business_weixin,this.improveInfo.business_id=e.business_id,this.improveLicensePic=e.business_license}},t.prototype.onGetToken=function(){var e=G["a"].getUrlParam("regToken")||A["a"].getCookie("regToken");this.usertoken.token=e},t.prototype.changeUploadUrl=function(){this.logoImgurl=R["a"].getBaseUrl()+"api.aspx?op="+y["a"].DO_SERVEFACE,this.licenseImgurl=R["a"].getBaseUrl()+"api.aspx?op="+y["a"].DO_SAVE_BUSINESSLICENCE},t.prototype.onGetCaptcha=function(){return O["a"](this,void 0,void 0,function(){var e,t,s;return O["d"](this,function(i){switch(i.label){case 0:return e=y["a"].GETCHECK_CODE,t=new w["b"],s=this,[4,this.xmlHttp.get(e,t)];case 1:return s.backData=i.sent(),this.backData.code==y["a"].HTTP_SUCCESS_NET_CODE&&(this.imgCaptchaM=this.backData,this.imgCaptchaKey=this.imgCaptchaM.key),[2]}})})},t.prototype.getCaptcha=function(){this.onGetCaptcha()},t.prototype.onSmsCode=function(){return N["a"].checkPhone(this.username)?N["a"].checkimgVerificatioCode(this.checkcode)?void this.GetSmscode():""==this.checkcode?(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_IMGCAPTCHACODE_EMPTY),this.$message.error(this.notifMessage),!1):(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_IMGCAPTCHACODE_ERROR),this.$message.error(this.notifMessage),!1):""==this.username?(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_PHONE_EMPTY),this.$message.error(this.notifMessage),!1):(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_PHONE_ERROR),this.$message.error(this.notifMessage),!1)},t.prototype.GetSmscode=function(){return O["a"](this,void 0,void 0,function(){var e,t,s,i,o=this;return O["d"](this,function(r){switch(r.label){case 0:return e=y["a"].DOSENDREGSMS,t=new D["e"],t.key=this.imgCaptchaKey,t.tel=this.username,t.regcode=this.checkcode,this.isLoading=!0,s=this,[4,this.xmlHttp.post(e,t)];case 1:return s.backData=r.sent(),this.isLoading=!1,this.backData.code==y["a"].HTTP_SUCCESS_NET_CODE?(this.smsCountDownNum=60,i=this,G["a"].countDown(this.smsCountDownNum,1,function(e){i.smsCountDownNum=e})):(this.$message.error(this.backData.msg),setTimeout(function(){o.onGetCaptcha()},500)),[2]}})})},t.prototype.submitRegOne=function(){return N["a"].checkPhone(this.username)?N["a"].checkimgVerificatioCode(this.checkcode)?N["a"].checkSmscode(this.smscode)?N["a"].checkPwd(this.password)?void this.onPhoneRegister():""==this.password?(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_PASSWORD_EMPTY),this.$message.error(this.notifMessage),!1):(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_PASSWORD_ERROR),this.$message.error(this.notifMessage),!1):""==this.smscode?(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_SMSCODE_EMPTY),this.$message.error(this.notifMessage),!1):(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_SMSCODE_ERROR),this.$message.error(this.notifMessage),!1):""==this.checkcode?(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_IMGCAPTCHACODE_EMPTY),this.$message.error(this.notifMessage),!1):(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_IMGCAPTCHACODE_ERROR),this.$message.error(this.notifMessage),!1):""==this.username?(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_PHONE_EMPTY),this.$message.error(this.notifMessage),!1):(this.notifMessage=$["a"].getTipsMsg($["a"].KEY_NOTIF_PHONE_ERROR),this.$message.error(this.notifMessage),!1)},t.prototype.onPhoneRegister=function(){var e=y["a"].URL_WBOP_DO_REG,t=new D["d"];t.username=this.username,t.tel=this.username,t.key=this.imgCaptchaKey,t.checkcode=this.checkcode,t.password=this.password,t.groupid=this.groupid,t.smscode=this.smscode,t.number=this.netbar,this.onRegister(e,t)},t.prototype.onRegister=function(e,t){return O["a"](this,void 0,void 0,function(){var s,i,o=this;return O["d"](this,function(r){switch(r.label){case 0:return this.isLoading=!0,s=this,[4,this.xmlHttp.post(e,t)];case 1:return s.backData=r.sent(),this.backData.code==y["a"].HTTP_SUCCESS_NET_CODE?(this.isLoading=!1,i=this.backData.token,A["a"].setCookie("regToken",i),this.reg_step=2):(this.isLoading=!1,this.$message.error(this.backData.msg),setTimeout(function(){o.onGetCaptcha()},500)),[2]}})})},t.prototype.onGetProvince=function(){return O["a"](this,void 0,void 0,function(){var e;return O["d"](this,function(t){switch(t.label){case 0:return[4,x["a"].getInstance().getProvince()];case 1:return e=t.sent(),this.options=e,[2]}})})},t.prototype.selectProvince=function(){var e=this.improveAddress.join("").replace("市辖区","").replace("县","");this.improveInfo.address=e},t.prototype.logoAvatarSuccess=function(e,t){e=this.xmlParse.parseXML(e);var s=e.xml.items;if(s.result==y["a"].HTTP_TOKEN_EXPIRE)this.$message.error("填写超时,请联系客服处理");else if(s.code!=y["a"].HTTP_SUCCESS_NET_CODE)return this.$message.error("图片有损坏,请更换图片"),!1;this.imageUrl=URL.createObjectURL(t.raw)},t.prototype.beforeAvatarUpload=function(e){this.onGetToken();var t=e.size/1024<300;return t||this.$message.error("上传头像图片大小不能超过 300K!"),t},t.prototype.licenseSuccess=function(e,t){e=this.xmlParse.parseXML(e);var s=e.xml.items;if(s.result==y["a"].HTTP_TOKEN_EXPIRE)this.$message.error("填写超时,请联系客服处理");else if(s.code!=y["a"].HTTP_SUCCESS_NET_CODE)return this.$message.error("图片有损坏,请更换图片"),!1;this.improveLicensePic=s.url+"?n="+new Date},t.prototype.beforeLicenseUpload=function(e){this.onGetToken();var t=e.size/1024<2048;return t||this.$message.error("上传头像图片大小不能超过 2M!"),t},t.prototype.backPre=function(){this.reg_step=1},t.prototype.submitRegTwo=function(){if(this.onGetToken(),this.improveInfo.token=this.usertoken.token,this.improveInfo.address+=this.improveDetailAddress,this.improveInfo.business_license=this.improveLicensePic,this.improveInfo.number=this.netbar,!this.improveInfo.title||!this.improveInfo.locked_ip||!this.improveInfo.address||!this.improveInfo.business_id||!this.improveInfo.business_license||!this.improveInfo.business_manager)return this.$message.error("请完善信息"),!1;this.netBarcheckip(this.improveInfo.locked_ip)&&this.onModi(this.improveInfo)},t.prototype.onModiSuccess=function(e){this.reg_step=3},t.prototype.onModiFail=function(e){this.$message.error(e.msg)},t.prototype.netBarcheckip=function(e){for(var t=e.split(/[\n,]/),s=!0,i=0,o=t;i<o.length;i++){var r=o[i];if(""!=r&&!U["a"].checkIP(r)){this.$message.error("ip格式不正确，正确格式为多个ip'英文'逗号分割，例如192.168.1.1, 192.168.1.2"),s=!1;break}}return s},t=O["b"]([Object(P["a"])({components:{"header-nav":I["a"],"footer-nav":S["a"]}})],t),t}(K["a"]);t["default"]=F,new F({}).$mount("#login")},4:function(e,t,s){e.exports=s("0e92")}});